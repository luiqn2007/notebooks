{"ID":"20240312030655-j1qpk4f","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240312030655-j1qpk4f","title":"启动","updated":"20240312030701"},"Children":[{"ID":"20240312030701-9q3jgfo","Type":"NodeParagraph","Properties":{"id":"20240312030701-9q3jgfo","updated":"20240312030701"},"Children":[{"Type":"NodeText","Data":"程序启动时，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-javaagent"},{"Type":"NodeText","Data":"​ 参数可以加载 JavaAgent，此时对应 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Laod-Time Instrumentation"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240312030701-36vcwcg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240312030701-36vcwcg","updated":"20240312030701"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"java ... -javaagent:JavaAgent的Jar包位置 [premain方法参数]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240312030701-may05hp","Type":"NodeParagraph","Properties":{"id":"20240312030701-may05hp","updated":"20240312030701"},"Children":[{"Type":"NodeText","Data":"第二种执行方法是利用 JVM 的 Attach 机制将 JavaAgent 附加到正在运行的程序上，对应 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Dynamic Instrumentation"},{"Type":"NodeText","Data":"​，该方法使用了 AttachAPI"}]},{"ID":"20240312030701-ufuiuno","Type":"NodeList","ListData":{},"Properties":{"id":"20240312030701-ufuiuno","updated":"20240312030701"},"Children":[{"ID":"20240312030701-lh2jrb4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240312030701-lh2jrb4","updated":"20240312030701"},"Children":[{"ID":"20240312030701-ga9336l","Type":"NodeParagraph","Properties":{"id":"20240312030701-ga9336l","updated":"20240312030701"},"Children":[{"Type":"NodeText","Data":"Java8：需要依赖 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"com.sun"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"tools.jar"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240312030701-5h67ev7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240312030701-5h67ev7","updated":"20240312030701"},"Children":[{"ID":"20240312030701-3aky78d","Type":"NodeParagraph","Properties":{"id":"20240312030701-3aky78d","updated":"20240312030701"},"Children":[{"Type":"NodeText","Data":"Java9：位于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"jdk.attach"},{"Type":"NodeText","Data":"​ 模块中，需要 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"require jdk.attach"},{"Type":"NodeText","Data":"​。另外还需要 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"java.instrument"},{"Type":"NodeText","Data":"​ 模块和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"java.management"},{"Type":"NodeText","Data":"​ 模块"}]}]}]},{"ID":"20240312030701-acl33ke","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240312030701-acl33ke","updated":"20240312030701"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public static void main(String[] args) throws Exception {\n    // 正在执行的程序进程 pid\n    String pid = \"1234\";\n    // 要绑定的 JavaAgent jar 包\n    String agent = \".../Agent.jar\";\n    VirtualMachine vm = VirtualMachine.attach(pid);\n    vm.loadAgent(agent);\n    vm.detach();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}