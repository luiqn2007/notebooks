{"ID":"20240311005721-hg6qy5k","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f600","id":"20240311005721-hg6qy5k","title":"结构基础知识","updated":"20240311005727"},"Children":[{"ID":"20240311005727-4mp6jyt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311005727-4mp6jyt","updated":"20240311005727"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"struct SIMPLE { int a; char b; float c; };\ntypedef struct { int a; char b; float c; } Simple;\n\nstruct SIMPLE a;\nSimple b;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311005727-k15zhlp","Type":"NodeList","ListData":{},"Properties":{"id":"20240311005727-k15zhlp","updated":"20240311005727"},"Children":[{"ID":"20240311005727-0kvrf0r","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311005727-0kvrf0r","updated":"20240311005727"},"Children":[{"ID":"20240311005727-4sgv5bq","Type":"NodeParagraph","Properties":{"id":"20240311005727-4sgv5bq","updated":"20240311005727"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"struct 名称 {}"},{"Type":"NodeText","Data":"​ 声明的名称为标签（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"tag"},{"Type":"NodeText","Data":"​），后续通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"struct 名称"},{"Type":"NodeText","Data":"​ 声明其他结构体"}]}]},{"ID":"20240311005727-goeedlo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311005727-goeedlo","updated":"20240311005727"},"Children":[{"ID":"20240311005727-6s3o7vm","Type":"NodeParagraph","Properties":{"id":"20240311005727-6s3o7vm","updated":"20240311005727"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"typedef struct {} 名称"},{"Type":"NodeText","Data":"​ 声明的名称为一个新类型，后续直接通过名称声明其他结构体"}]}]}]},{"ID":"20240311005727-fjndwgo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311005727-fjndwgo","updated":"20240311005727"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"struct A {\n    // 错误：循环引用\n    struct A perr;\n    // 正确\n    struct A *pok;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311005727-cp83gjs","Type":"NodeParagraph","Properties":{"id":"20240311005727-cp83gjs","updated":"20240311005727"},"Children":[{"Type":"NodeText","Data":"注意结构体允许自引用，但只能用于"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指针"},{"Type":"NodeText","Data":"。"}]},{"ID":"20240311005727-xntzl8j","Type":"NodeList","ListData":{},"Properties":{"id":"20240311005727-xntzl8j","updated":"20240311005727"},"Children":[{"ID":"20240311005727-vn53l6b","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311005727-vn53l6b","updated":"20240311005727"},"Children":[{"ID":"20240311005727-hanpwku","Type":"NodeParagraph","Properties":{"id":"20240311005727-hanpwku","updated":"20240311005727"},"Children":[{"Type":"NodeText","Data":"不完整声明：当两个结构体之间需要互相引用时，可以使用不完整声明，此声明不带有结构体内容（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"{}"},{"Type":"NodeText","Data":"​）"}]}]}]},{"ID":"20240311005727-dz8mc2q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311005727-dz8mc2q","updated":"20240311005727"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"// 不完整声明\nstruct B;\n\nstruct A {\n    struct B *ptr;\n};\n\nstruct B {\n    struct A *ptr;\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311005727-jxt22oz","Type":"NodeParagraph","Properties":{"id":"20240311005727-jxt22oz","updated":"20240311005727"},"Children":[{"Type":"NodeText","Data":"但不完整声明只能用于"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"指针"},{"Type":"NodeText","Data":"。"}]},{"ID":"20240311005727-u2fw2b0","Type":"NodeList","ListData":{},"Properties":{"id":"20240311005727-u2fw2b0","updated":"20240311005727"},"Children":[{"ID":"20240311005727-26k1gq0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311005727-26k1gq0","updated":"20240311005727"},"Children":[{"ID":"20240311005727-7pu4ubc","Type":"NodeParagraph","Properties":{"id":"20240311005727-7pu4ubc","updated":"20240311005727"},"Children":[{"Type":"NodeText","Data":"结构体在内存中不是紧密排布的，需要满足一定的内存偏移规律以提高访问性能 - 变量地址相对结构体位置的偏移量应当被 4 或 8 整除。"}]},{"ID":"20240311005727-d00dv7v","Type":"NodeList","ListData":{},"Properties":{"id":"20240311005727-d00dv7v","updated":"20240311005727"},"Children":[{"ID":"20240311005727-uh8sxbe","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311005727-uh8sxbe","updated":"20240311005727"},"Children":[{"ID":"20240311005727-9xho5uq","Type":"NodeParagraph","Properties":{"id":"20240311005727-9xho5uq","updated":"20240311005727"},"Children":[{"Type":"NodeText","Data":"通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"stddef.h"},{"Type":"NodeText","Data":"​ 中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"offsetof(type, member)"},{"Type":"NodeText","Data":"​ 检查 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"type"},{"Type":"NodeText","Data":"​ 结构体中 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"member"},{"Type":"NodeText","Data":"​ 成员的内存偏移量"}]}]}]}]}]}]}