{"ID":"20240311012141-y0nd8s8","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f607","id":"20240311012141-y0nd8s8","title":"分离模块间的关注点","updated":"20240311012201"},"Children":[{"ID":"20240311012201-2iun473","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240311012201-2iun473","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"原则"}]},{"ID":"20240311012201-642luec","Type":"NodeList","ListData":{},"Properties":{"id":"20240311012201-642luec","updated":"20240311012201"},"Children":[{"ID":"20240311012201-181rnxg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311012201-181rnxg","updated":"20240311012201"},"Children":[{"ID":"20240311012201-ri5ijyl","Type":"NodeParagraph","Properties":{"id":"20240311012201-ri5ijyl","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"避免形成大模块，减少模块间的耦合"}]}]},{"ID":"20240311012201-lu8hrht","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311012201-lu8hrht","updated":"20240311012201"},"Children":[{"ID":"20240311012201-b1crdkh","Type":"NodeParagraph","Properties":{"id":"20240311012201-b1crdkh","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"将不同职责分配给不同模块，隐藏接口的实现细节"}]}]}]},{"ID":"20240311012201-nqgxux7","Type":"NodeParagraph","Properties":{"id":"20240311012201-nqgxux7","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"原因：松耦合的模块（类）更容易监督和执行"}]},{"ID":"20240311012201-yguiiws","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240311012201-yguiiws","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"使用"}]},{"ID":"20240311012201-74tksnc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240311012201-74tksnc","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"根据关注点拆分类"}]},{"ID":"20240311012201-2ywd01e","Type":"NodeParagraph","Properties":{"id":"20240311012201-2ywd01e","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"模块（类）的扩张通常是需求的增加导致的。以下是一个用户服务的第一个版本："}]},{"ID":"20240311012201-znn8c2p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311012201-znn8c2p","updated":"20240311012201"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"class UserServer {\n    // version 1\n    public User loadUser(String userId) { ... }\n    public boolean isUserExisted(String userId) { ... }\n    public User updateUserInfo(UserInfo userInfo) { ... }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311012201-9p3qf23","Type":"NodeParagraph","Properties":{"id":"20240311012201-9p3qf23","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"后来需求增加用户通知功能，允许用户注册需要通知的信息："}]},{"ID":"20240311012201-nzbwi1k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311012201-nzbwi1k","updated":"20240311012201"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"class UserServer {\n    // version 1\n    public User loadUser(String userId) { ... }\n    public boolean isUserExisted(String userId) { ... }\n    public User updateUserInfo(UserInfo userInfo) { ... }\n    // version 2\n    public List\u003cNodificationType\u003e getNotificationTypes(User user) { ... }\n    public void registerNotificationType(User user, NodificationType type);\n    public void unregisterNotificationType(User user, NodificationType type);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311012201-idq8cu2","Type":"NodeParagraph","Properties":{"id":"20240311012201-idq8cu2","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"第三次更新后，增加新功能，可以搜索用户、锁定用户、获取锁定用户等"}]},{"ID":"20240311012201-it60u8s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311012201-it60u8s","updated":"20240311012201"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"class UserServer {\n    // version 1\n    public User loadUser(String userId) { ... }\n    public boolean isUserExisted(String userId) { ... }\n    public User updateUserInfo(UserInfo userInfo) { ... }\n    // version 2\n    public List\u003cNodificationType\u003e getNotificationTypes(User user) { ... }\n    public void registerNotificationType(User user, NodificationType type) { ... }\n    public void unregisterNotificationType(User user, NodificationType type) { ... }\n    // version 3\n    public List\u003cUser\u003e searchUser(String name) { ... }\n    public void blockUser(User user) { ... }\n    public List\u003cUser\u003e getAllBlockedUser() { ... }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311012201-il92sc3","Type":"NodeParagraph","Properties":{"id":"20240311012201-il92sc3","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"此时，该服务可能被系统大多数位置调用，且实现也会非常长。"}]},{"ID":"20240311012201-05zlrzl","Type":"NodeParagraph","Properties":{"id":"20240311012201-05zlrzl","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"我们应该在一个服务承担多个任务时就按任务将其拆分为多个服务"}]},{"ID":"20240311012201-ir1d76h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311012201-ir1d76h","updated":"20240311012201"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"class UserServer {\n    public User loadUser(String userId) { ... }\n    public boolean isUserExisted(String userId) { ... }\n    public User updateUserInfo(UserInfo userInfo) { ... }\n    public List\u003cUser\u003e searchUser(String name) { ... }\n}\n\nclass UserNotificationServer {\n    public List\u003cNodificationType\u003e getNotificationTypes(User user) { ... }\n    public void registerNotificationType(User user, NodificationType type) { ... }\n    public void unregisterNotificationType(User user, NodificationType type) { ... }\n}\n\nclass UserBlockServer {\n    public void blockUser(User user) { ... }\n    public List\u003cUser\u003e getAllBlockedUser() { ... }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311012201-3pzjtpx","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240311012201-3pzjtpx","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"通过接口隐藏实现"}]},{"ID":"20240311012201-9bsuz2t","Type":"NodeParagraph","Properties":{"id":"20240311012201-9bsuz2t","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"通过使类实现接口，并使用接口以减少耦合。通常由一个基础功能实体实现，之后不断扩展新功能。"}]},{"ID":"20240311012201-ulzn1hw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240311012201-ulzn1hw","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"使用三方库和框架"}]},{"ID":"20240311012201-zjsbysc","Type":"NodeParagraph","Properties":{"id":"20240311012201-zjsbysc","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"此功能替代的是一些常用的工具代码，如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ArrayUtils"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"StringUtils"},{"Type":"NodeText","Data":"​ 等。"}]},{"ID":"20240311012201-5mctcfv","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240311012201-5mctcfv","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"例外"}]},{"ID":"20240311012201-fmibc3d","Type":"NodeParagraph","Properties":{"id":"20240311012201-fmibc3d","updated":"20240311012201"},"Children":[{"Type":"NodeText","Data":"工具类、工具方法的强耦合是不可避免的，但此类代码片段一定要短。如果存在大量相关方法，参考"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240311011853-4d71r1m","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"使用三方库和框架"},{"Type":"NodeText","Data":"，查找是否有相关功能的库和框架实现。"}]},{"ID":"20240311012201-0shkjuz","Type":"NodeParagraph","Properties":{"id":"20240311012201-0shkjuz","updated":"20240311012201"}}]}