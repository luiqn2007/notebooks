{"ID":"20240311123432-xqnz8b6","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240311123432-xqnz8b6","tags":"C++17","title":"constexpr λ 表达式","updated":"20240311123646"},"Children":[{"ID":"20240311123452-m38madm","Type":"NodeParagraph","Properties":{"id":"20240311123452-m38madm","updated":"20240311123530"},"Children":[{"Type":"NodeText","Data":"对于所有满足 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240311122012-ajqz2jv","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"constexpr"},{"Type":"NodeText","Data":"​ 要求的 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240310154429-pfz8p3x","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"lambda"},{"Type":"NodeText","Data":"​ 表达式，都将默认声明为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"constexpr"},{"Type":"NodeText","Data":"​ 的。经验证，以下三个例子中，GCC 全部可以编译，MSVC（VS 2022）编译错误：C2131 表达式的计算结果不是常数"}]},{"ID":"20240311123609-fugd1w3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311123609-fugd1w3","updated":"20240311123637"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"// 例1 正常编译通过\nauto get_size = [](int i) { return i * 2; };\n// get_size 函数体满足编译时常量表达式的要求，自动转换为 constexpr 的\nchar buffer[get_size(10)] = {0};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311123609-bjdvyzv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311123609-bjdvyzv","updated":"20240311123637"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"// 例2\nint k = 5;\nchar buffer2[get_size(k)] = {0};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311123452-vvolsxj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311123452-vvolsxj","updated":"20240311123646"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"// 例3\nauto get_size2 = [](int i) {\n    static int times = 2;\n    return i * times;\n};\nchar buffer3[get_size2(10)] = {0};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311123604-v655grn","Type":"NodeParagraph","Properties":{"id":"20240311123604-v655grn"}}]}