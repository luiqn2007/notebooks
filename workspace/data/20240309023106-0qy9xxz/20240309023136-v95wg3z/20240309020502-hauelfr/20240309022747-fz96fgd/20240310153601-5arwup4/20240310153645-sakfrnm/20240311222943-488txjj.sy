{"ID":"20240311222943-488txjj","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240311222943-488txjj","title":"__VA_ARGS__","updated":"20240311223042"},"Children":[{"ID":"20240311222957-t6j6pmy","Type":"NodeParagraph","Properties":{"id":"20240311222957-t6j6pmy","updated":"20240311223042"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"tag","TextMarkTextContent":"C++11"},{"Type":"NodeText","Data":"​ 开始引入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"__VA_ARGS__"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310153645-sakfrnm","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"宏"},{"Type":"NodeText","Data":"，功能与 C 对应宏相同，用于展开宏可变参数。"}]},{"ID":"20240311222957-itia9ll","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311222957-itia9ll","updated":"20240311222957"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"#define LOG(msg, ...) (printf(\"[%s] %d \" #msg, __FILE__, __LINE__, ##__VA_ARGS__))\n\nint main() {\n    // [C:/Dev/untitleds/cpp/main.cpp] 8 hello aaa 123\n    LOG(hello %s %d, \"aaa\", 123);\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311222957-57y4mya","Type":"NodeParagraph","Properties":{"id":"20240311222957-57y4mya","updated":"20240311222957"},"Children":[{"Type":"NodeText","Data":"以上例子中，引入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"..."},{"Type":"NodeText","Data":"​ 作为可变参数，相当于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"printf(\u0026quot;[%s] %d \u0026quot; \u0026quot;msg\u0026quot;, 文件名, 行号, ...)"},{"Type":"NodeText","Data":"​，一般情况下可以正常输出。"}]},{"ID":"20240311222957-bnvf4m9","Type":"NodeParagraph","Properties":{"id":"20240311222957-bnvf4m9","updated":"20240311222957"},"Children":[{"Type":"NodeText","Data":"考虑特殊情况，当可变参数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"..."},{"Type":"NodeText","Data":"​ 没有参数时，其结果为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"printf(\u0026quot;...\u0026quot;, ..., 行号, )"},{"Type":"NodeText","Data":"​，末尾一个逗号多余，从语法上来说有问题（但 GCC 经测试可以正常使用）。"}]},{"ID":"20240311222957-x3eb0sl","Type":"NodeParagraph","Properties":{"id":"20240311222957-x3eb0sl","updated":"20240311223005"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"tag","TextMarkTextContent":"C++20"},{"Type":"NodeText","Data":"​ 开始引入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"__VA_OPT__"},{"Type":"NodeText","Data":"​ 宏，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"__VA_OPT__(分隔符) __VA_ARGS__"},{"Type":"NodeText","Data":"​ 表示仅在可变参数存在时，在前面补充一个分隔符，否则不添加。"}]},{"ID":"20240311222957-9o093zz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311222957-9o093zz","updated":"20240311222957"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"#define LOG(msg, ...) (printf(\"[%s] %d \" #msg, __FILE__, __LINE__ \\\n                                              __VA_OPT__(,) ##__VA_ARGS__))\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}