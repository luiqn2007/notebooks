{"ID":"20240311124403-lm7y43z","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f527","id":"20240311124403-lm7y43z","tags":"C++20","title":"constinit","updated":"20240311124822"},"Children":[{"ID":"20240311124417-wwaujbd","Type":"NodeParagraph","Properties":{"id":"20240311124417-wwaujbd","updated":"20240311124611"},"Children":[{"Type":"NodeText","Data":"C++20 引入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"constinit"},{"Type":"NodeText","Data":"​ 说明符用于确保"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240309023008-1temlmj","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"变量"},{"Type":"NodeText","Data":"具有"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310151745-5gx1mbb","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"静态存储时间"},{"Type":"NodeText","Data":"。该说明符的具体作用有："}]},{"ID":"20240311124417-jgwfh4l","Type":"NodeList","ListData":{},"Properties":{"id":"20240311124417-jgwfh4l","updated":"20240311124417"},"Children":[{"ID":"20240311124417-xp246ac","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311124417-xp246ac","updated":"20240311124417"},"Children":[{"ID":"20240311124417-zlw4lex","Type":"NodeParagraph","Properties":{"id":"20240311124417-zlw4lex","updated":"20240311124417"},"Children":[{"Type":"NodeText","Data":"校验声明的变量具有静态存储时间"}]}]}]},{"ID":"20240311124417-b9e46sv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311124417-b9e46sv","updated":"20240311124417"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"constinit int x = 11;\n\nint main() {\n    constinit static int y = 42;\n    // error: 'constinit' can only be applied to a variable with static or thread storage duration\n    constinit int z = 10;\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311124417-mszqzl6","Type":"NodeList","ListData":{},"Properties":{"id":"20240311124417-mszqzl6","updated":"20240311124417"},"Children":[{"ID":"20240311124417-vhh5c6i","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311124417-vhh5c6i","updated":"20240311124417"},"Children":[{"ID":"20240311124417-6ew3qax","Type":"NodeParagraph","Properties":{"id":"20240311124417-6ew3qax","updated":"20240311124417"},"Children":[{"Type":"NodeText","Data":"变量具有常量初始化程序"}]}]}]},{"ID":"20240311124417-uqa6qf5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311124417-uqa6qf5","updated":"20240311124417"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"const char* f() { return \"hello\"; }\nconstexpr const char* g() { return \"cpp\"; }\n// error: 'constinit' variable 'str1' does not have a constant initializer\n// error: call to non-'constexpr' function 'const char* f()'\nconstinit const char* str1 = f();\nconstinit const char* str2 = g();\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311124417-bi15hwb","Type":"NodeList","ListData":{},"Properties":{"id":"20240311124417-bi15hwb","updated":"20240311124459"},"Children":[{"ID":"20240311124417-vpjsqpl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311124417-vpjsqpl","updated":"20240311124459"},"Children":[{"ID":"20240311124417-og1qfqw","Type":"NodeParagraph","Properties":{"id":"20240311124417-og1qfqw","updated":"20240311124459"},"Children":[{"Type":"NodeText","Data":"用于非初始化声明，表示 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240311124459-0vt9b6a","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"thread_local"},{"Type":"NodeText","Data":"​ 变量已被赋值"}]}]}]},{"ID":"20240311124417-d2lpshv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311124417-d2lpshv","updated":"20240311124417"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"extern thread_local constinit int x;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}