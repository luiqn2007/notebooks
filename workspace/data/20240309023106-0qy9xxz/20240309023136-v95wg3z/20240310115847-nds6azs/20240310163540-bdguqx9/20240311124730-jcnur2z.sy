{"ID":"20240311124730-jcnur2z","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240311124730-jcnur2z","tags":"C++20","title":"is_constant_evaluated","updated":"20240311124752"},"Children":[{"ID":"20240311124736-xs5z9m5","Type":"NodeParagraph","Properties":{"id":"20240311124736-xs5z9m5","updated":"20240311124752"},"Children":[{"Type":"NodeText","Data":"C++20 头文件 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;type_traits\u0026gt;"},{"Type":"NodeText","Data":"​ 新增函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"std::is_constant_evaluated()"},{"Type":"NodeText","Data":"​，用于判断当前代码执行环境是在"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240309020502-hauelfr","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"编译期"},{"Type":"NodeText","Data":"还是运行时，明显的编译期则返回 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"true"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240311124736-7myvdkp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311124736-7myvdkp","updated":"20240311124736"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"constexpr double power(double b, int x) {\n    if (std::is_constant_evaluated() \u0026\u0026 x \u003e= 0) {\n        double r = 1.0, p = b;\n        unsigned u = x;\n        while (u) {\n            if (u \u0026 1) r *= p;\n            u /= 2;\n            p *= p;\n        }\n        return r;\n    } else {\n        return std::pow(b, x);\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311124736-mtmaskd","Type":"NodeParagraph","Properties":{"id":"20240311124736-mtmaskd","updated":"20240311124736"},"Children":[{"Type":"NodeText","Data":"在 C++ 文档中，明显常量求值包括："}]},{"ID":"20240311124736-l9kiiqh","Type":"NodeList","ListData":{},"Properties":{"id":"20240311124736-l9kiiqh","updated":"20240311124736"},"Children":[{"ID":"20240311124736-5csw2bd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311124736-5csw2bd","updated":"20240311124736"},"Children":[{"ID":"20240311124736-e1stume","Type":"NodeParagraph","Properties":{"id":"20240311124736-e1stume","updated":"20240311124736"},"Children":[{"Type":"NodeText","Data":"常量表达式"}]}]},{"ID":"20240311124736-am4ajkl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311124736-am4ajkl","updated":"20240311124736"},"Children":[{"ID":"20240311124736-udar0vp","Type":"NodeParagraph","Properties":{"id":"20240311124736-udar0vp","updated":"20240311124736"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"if constexpr"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240311124736-oi5rta5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311124736-oi5rta5","updated":"20240311124736"},"Children":[{"ID":"20240311124736-njurmn4","Type":"NodeParagraph","Properties":{"id":"20240311124736-njurmn4","updated":"20240311124736"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"constexpr"},{"Type":"NodeText","Data":"​ 变量初始化"}]}]},{"ID":"20240311124736-m02oqu0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311124736-m02oqu0","updated":"20240311124736"},"Children":[{"ID":"20240311124736-3ikhn4i","Type":"NodeParagraph","Properties":{"id":"20240311124736-3ikhn4i","updated":"20240311124736"},"Children":[{"Type":"NodeText","Data":"立即函数及其调用"}]}]},{"ID":"20240311124736-x00qc5v","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311124736-x00qc5v","updated":"20240311124736"},"Children":[{"ID":"20240311124736-uh5x0fx","Type":"NodeParagraph","Properties":{"id":"20240311124736-uh5x0fx","updated":"20240311124736"},"Children":[{"Type":"NodeText","Data":"约束表达式"}]}]},{"ID":"20240311124736-ixg8mbp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311124736-ixg8mbp","updated":"20240311124736"},"Children":[{"ID":"20240311124736-junfh72","Type":"NodeParagraph","Properties":{"id":"20240311124736-junfh72","updated":"20240311124736"},"Children":[{"Type":"NodeText","Data":"可在常量表达式中使用或具有常量初始化的变量初始化程序"}]}]}]}]}