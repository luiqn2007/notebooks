{"ID":"20240311225243-pkuii52","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240311225243-pkuii52","tags":"C++11","title":"嵌套的形参包","updated":"20240311225419"},"Children":[{"ID":"20240311225308-s1akw54","Type":"NodeParagraph","Properties":{"id":"20240311225308-s1akw54","updated":"20240311225332"},"Children":[{"Type":"NodeText","Data":"可以在模板中嵌套一个"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310160514-3ti8z62","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"模板"},{"Type":"NodeText","Data":"的"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240311224053-o2ofzrw","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"形参包"},{"Type":"NodeText","Data":"，但被嵌套的包无法解开："}]},{"ID":"20240311225418-6g3r0bq","Type":"NodeSuperBlock","Properties":{"id":"20240311225418-6g3r0bq","updated":"20240311225419"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240311225308-y7z5pmy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311225308-y7z5pmy","updated":"20240311225419"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"template\u003ctemplate\u003cclass...\u003e class ...Args\u003e\nclass bar: public Args\u003cint, double\u003e... {\npublic:\n    bar(const Args\u003cint, double\u003e\u0026 ...args) : Args\u003cint, double\u003e(args)... {}\n};\n\ntemplate\u003cclass ...Args\u003e\nclass baz1 {};\n\ntemplate\u003cclass ...Args\u003e\nclass baz2 {};\n\nint main() {\n    baz1\u003cint, double\u003e a1;\n    baz2\u003cint, double\u003e a2;\n    bar b(a1, a2);\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311225415-yw2627d","Type":"NodeSuperBlock","Properties":{"id":"20240311225415-yw2627d","updated":"20240311225419"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240311225308-k75tgsb","Type":"NodeParagraph","Properties":{"id":"20240311225308-k75tgsb","updated":"20240311225416"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baz1"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baz2"},{"Type":"NodeText","Data":"​ 是两个带有形参包的类型，而 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bar"},{"Type":"NodeText","Data":"​ 模板上也需要一个形参包。"}]},{"ID":"20240311225403-26gakzj","Type":"NodeParagraph","Properties":{"id":"20240311225403-26gakzj","updated":"20240311225416"},"Children":[{"Type":"NodeText","Data":"看似 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bar"},{"Type":"NodeText","Data":"​ 包含两个形参包，但内层的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"template\u0026lt;class...\u0026gt;"},{"Type":"NodeText","Data":"​ 是无法（在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bar"},{"Type":"NodeText","Data":"​ 中）展开的，因此事实上只包含了一个形参包。"}]},{"ID":"20240311225407-p1srcrl","Type":"NodeParagraph","Properties":{"id":"20240311225407-p1srcrl","updated":"20240311225416"},"Children":[{"Type":"NodeText","Data":"事实上 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bar"},{"Type":"NodeText","Data":"​ 继承自 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baz1\u0026lt;int, double\u0026gt;"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baz2\u0026lt;int, double\u0026gt;"},{"Type":"NodeText","Data":"​ 两个模板实例而不是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baz1\u0026lt;...Args\u0026gt;"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baz2\u0026lt;...Args\u0026gt;"},{"Type":"NodeText","Data":"​，因为两个类的模板缺少模板实参，无法实例化。"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240311225308-na7s2of","Type":"NodeParagraph","Properties":{"id":"20240311225308-na7s2of","updated":"20240311225308"},"Children":[{"Type":"NodeText","Data":"事实上一个类中是可以存在多个形参包的，但往往需要这几个形参包的长度是相同的："}]},{"ID":"20240311225308-jimuv1p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311225308-jimuv1p","updated":"20240311225308"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"template\u003cclass ...\u003e          struct Tuple {};\ntemplate\u003cclass T1, class T2\u003e struct Pair {};\n\ntemplate\u003cclass ...FirstArgs\u003e\nstruct Zip {\n    template\u003cclass ...SecondArgs\u003e\n    struct with {\n        typedef Tuple\u003cPair\u003cFirstArgs, SecondArgs\u003e...\u003e type;\n    };\n};\n\nint main() {\n    // 展开后的类型：Tuple\u003cPair\u003cint, char\u003e, Pair\u003cdouble, string\u003e, Pair\u003cfloat, int\u003e\u003e\n    Zip\u003cint, double, float\u003e::with\u003cchar, string, int\u003e::type t;\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}