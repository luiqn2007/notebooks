{"ID":"20240311234023-ivapcss","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240311234023-ivapcss","title":"require 约束","updated":"20240311234220"},"Children":[{"ID":"20240311234037-nvmjvaa","Type":"NodeParagraph","Properties":{"id":"20240311234037-nvmjvaa","updated":"20240311234220"},"Children":[{"Type":"NodeText","Data":"对于简单的"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240311233822-z1eido1","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"约束"},{"Type":"NodeText","Data":"，也可以直接使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"requires"},{"Type":"NodeText","Data":"​ 对类型进行约束，可以出现在模板形参列表或函数声明的尾部："}]},{"ID":"20240311234037-8b79xwl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311234037-8b79xwl","updated":"20240311234220"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"template\u003cclass T\u003e\n// 位于模板形参列表尾部\nrequires std::is_integral_v\u003cT\u003e\nstruct X {};\n\n\ntemplate\u003cclass T\u003e\nT add(T a, T b)\n// 位于函数声明尾部\nrequires std::is_integral_v\u003cT\u003e\n{\n    return a + b;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311234037-eys04d3","Type":"NodeParagraph","Properties":{"id":"20240311234037-eys04d3","updated":"20240311234220"},"Children":[{"Type":"NodeText","Data":"使用概念和约束表达式可以使异常信息更加清晰："}]},{"ID":"20240311234037-6bdwpyc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311234037-6bdwpyc","updated":"20240311234220"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"template\u003cclass T\u003e\nrequires std::is_integral_v\u003cT\u003e\nstruct X {};\n\nint main() {\n    // error: template constraint failure for 'template\u003cclass T\u003e  requires  is_integral_v\u003cT\u003e struct X'\n    X\u003cstring\u003e x1;\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311234037-g220gmh","Type":"NodeParagraph","Properties":{"id":"20240311234037-g220gmh","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"约束表达式应当是一个类型为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bool"},{"Type":"NodeText","Data":"​ 的纯右值常量表达式，结果为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"true"},{"Type":"NodeText","Data":"​ 表示约束检查通过，替换结果合法。"}]},{"ID":"20240311234037-ew3vmgh","Type":"NodeList","ListData":{},"Properties":{"id":"20240311234037-ew3vmgh","updated":"20240311234037"},"Children":[{"ID":"20240311234037-n1woifs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311234037-n1woifs","updated":"20240311234037"},"Children":[{"ID":"20240311234037-tgnbxks","Type":"NodeParagraph","Properties":{"id":"20240311234037-tgnbxks","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;\u0026amp;"},{"Type":"NodeText","Data":"​ 运算称为约束的合取"}]}]},{"ID":"20240311234037-lua2vh4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311234037-lua2vh4","updated":"20240311234037"},"Children":[{"ID":"20240311234037-p3wkosm","Type":"NodeParagraph","Properties":{"id":"20240311234037-p3wkosm","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"||"},{"Type":"NodeText","Data":"​ 运算称为约束的析取"}]}]}]},{"ID":"20240311234037-duex94g","Type":"NodeParagraph","Properties":{"id":"20240311234037-duex94g","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"当约束表达式存在于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"requires"},{"Type":"NodeText","Data":"​ 子句中时，约束表达式有了进一步的要求："}]},{"ID":"20240311234037-239fe15","Type":"NodeList","ListData":{},"Properties":{"id":"20240311234037-239fe15","updated":"20240311234037"},"Children":[{"ID":"20240311234037-5hsr76v","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311234037-5hsr76v","updated":"20240311234037"},"Children":[{"ID":"20240311234037-0um2bdr","Type":"NodeParagraph","Properties":{"id":"20240311234037-0um2bdr","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"若表达式不是一个初等表达式，应当使用括号包围"}]}]},{"ID":"20240311234037-26u6uld","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311234037-26u6uld","updated":"20240311234037"},"Children":[{"ID":"20240311234037-crrqk84","Type":"NodeParagraph","Properties":{"id":"20240311234037-crrqk84","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"只能是几个初等表达式（或带括号的任意表达式）与 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;\u0026amp;"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"||"},{"Type":"NodeText","Data":"​ 的组合"}]}]}]},{"ID":"20240311234037-i1qxoc9","Type":"NodeParagraph","Properties":{"id":"20240311234037-i1qxoc9","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"当存在多种约束时，检查的优先级如下："}]},{"ID":"20240311234037-34cgubr","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240311234037-34cgubr","updated":"20240311234037"},"Children":[{"ID":"20240311234037-pdbm5ui","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240311234037-pdbm5ui","updated":"20240311234037"},"Children":[{"ID":"20240311234037-fobejm1","Type":"NodeParagraph","Properties":{"id":"20240311234037-fobejm1","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"模板形参列表中的形参约束"}]}]},{"ID":"20240311234037-x26aroy","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240311234037-x26aroy","updated":"20240311234037"},"Children":[{"ID":"20240311234037-xs24vg6","Type":"NodeParagraph","Properties":{"id":"20240311234037-xs24vg6","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"模板形参列表之后的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"requires"},{"Type":"NodeText","Data":"​ 子句"}]}]},{"ID":"20240311234037-pfxpl1d","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240311234037-pfxpl1d","updated":"20240311234037"},"Children":[{"ID":"20240311234037-bo64tj0","Type":"NodeParagraph","Properties":{"id":"20240311234037-bo64tj0","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"简写函数模板声明中修饰 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"auto"},{"Type":"NodeText","Data":"​ 的概念"}]}]},{"ID":"20240311234037-jpv61h7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20240311234037-jpv61h7","updated":"20240311234037"},"Children":[{"ID":"20240311234037-scmuvsv","Type":"NodeParagraph","Properties":{"id":"20240311234037-scmuvsv","updated":"20240311234037"},"Children":[{"Type":"NodeText","Data":"函数模板声明尾部的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"requires"},{"Type":"NodeText","Data":"​ 子句"}]}]}]}]}