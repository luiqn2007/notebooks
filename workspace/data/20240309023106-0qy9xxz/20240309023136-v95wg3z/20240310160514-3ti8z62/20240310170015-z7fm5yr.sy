{"ID":"20240310170015-z7fm5yr","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240310170015-z7fm5yr","tags":"C++11","title":"SFINAE","updated":"20240311233225"},"Children":[{"ID":"20240310170015-xuieci7","Type":"NodeParagraph","Properties":{"id":"20240310170015-xuieci7","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240311233201"},"Children":[{"Type":"NodeText","Data":"SFINAE：Substitution failed is not an error，替换失败并非错误。在函数模板重载时，当 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"em","TextMarkTextContent":"模板形参替换为指定的实参"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":" 或 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"em","TextMarkTextContent":"由模板实参推导出模板形参"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":" 的过程中出现了失败，则放弃这个重载而不是抛出一个编译错误。"}]},{"ID":"20240311233210-gusconq","Type":"NodeParagraph","Properties":{"id":"20240311233210-gusconq","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240311233216"},"Children":[{"Type":"NodeText","Data":"替换失败：在直接上下文中使用模板实参替换形参后，类型或表达式不合法。"}]},{"ID":"20240311233217-8auizoc","Type":"NodeParagraph","Properties":{"id":"20240311233217-8auizoc","style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);","updated":"20240311233225"},"Children":[{"Type":"NodeText","Data":"编译错误：替换后在非直接上下文中产生副作用导致错误。"}]},{"ID":"20240310170037-kk66zvg","Type":"NodeParagraph","Properties":{"id":"20240310170037-kk66zvg","updated":"20240310230031"},"Children":[{"Type":"NodeText","Data":"SFINAE 允许试图创建无效的"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310160514-3ti8z62","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"模板"},{"Type":"NodeText","Data":"类型，但不允许试图计算无效的表达。"}]},{"ID":"20240310170037-65p8tg2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310170037-65p8tg2","updated":"20240310170037"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"template\u003cint I\u003e void f1(int (\u0026)[24 / (4 + I)]);\ntemplate\u003cint I\u003e void f2(int (\u0026)[24 / (4 - I)]);\n\nint main() {\n    // 允许\n    \u0026f1\u003c4\u003e;\n    // 错误：size of array is not an integral constant-expression\n    \u0026f2\u003c4\u003e;\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310170037-1vdafg1","Type":"NodeParagraph","Properties":{"id":"20240310170037-1vdafg1","updated":"20240310170037"},"Children":[{"Type":"NodeText","Data":"SFINAE 是函数模板可以重载的重要基础。下面例子中 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"g\u0026lt;1\u0026gt;()"},{"Type":"NodeText","Data":"​ 先试图生成 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;int* 1\u0026gt;"},{"Type":"NodeText","Data":"​ 失败，之后尝试生成 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;int 1\u0026gt;"},{"Type":"NodeText","Data":"​ 版本成功。"}]},{"ID":"20240310170037-sb4q43u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310170037-sb4q43u","updated":"20240310170037"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"template\u003cint* P\u003e int g() { return *P; }\ntemplate\u003cint N\u003e int g() { return N; }\n\nint main() {\n    int i = g\u003c1\u003e();\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310170037-zlb04yq","Type":"NodeParagraph","Properties":{"id":"20240310170037-zlb04yq","updated":"20240310170040"},"Children":[{"Type":"NodeText","Data":"用于类时，则可以配合模板特化用于校验和运算"}]}]}