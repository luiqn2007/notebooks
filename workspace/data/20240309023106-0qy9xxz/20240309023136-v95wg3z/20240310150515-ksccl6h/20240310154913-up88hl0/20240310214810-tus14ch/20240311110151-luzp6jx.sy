{"ID":"20240311110151-luzp6jx","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f527","id":"20240311110151-luzp6jx","tags":"C++11","title":"继承构造","updated":"20240311110250"},"Children":[{"ID":"20240311110200-qxdlig3","Type":"NodeParagraph","Properties":{"id":"20240311110200-qxdlig3","updated":"20240311110250"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"using"},{"Type":"NodeText","Data":"​ 允许将"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310154913-up88hl0","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"基类"},{"Type":"NodeText","Data":"的"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310161644-g7cva4b","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"构造函数"},{"Type":"NodeText","Data":"引入子类，此时子类会存在对应构造并只会将数据传递给基类对应构造。"}]},{"ID":"20240311110200-j5wa8dl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311110200-j5wa8dl","updated":"20240311110200"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"class A {\npublic:\n    A() {}\n    A(int a, double b) {}\n    A(char a, float b) {}\n};\n\nclass B: A {\n    // 导入所有 A 的构造函数\n    using A::A;\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311110200-cdct7dt","Type":"NodeParagraph","Properties":{"id":"20240311110200-cdct7dt","updated":"20240311110200"},"Children":[{"Type":"NodeText","Data":"继承构造需要注意一下问题："}]},{"ID":"20240311110200-m0essbo","Type":"NodeList","ListData":{},"Properties":{"id":"20240311110200-m0essbo","updated":"20240311110200"},"Children":[{"ID":"20240311110200-ut1iqn4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311110200-ut1iqn4","updated":"20240311110200"},"Children":[{"ID":"20240311110200-ew2ujap","Type":"NodeParagraph","Properties":{"id":"20240311110200-ew2ujap","updated":"20240311110200"},"Children":[{"Type":"NodeText","Data":"导入方式是隐式导入，即只有在代码中实际用到某个构造，编译时才会导入该构造"}]}]},{"ID":"20240311110200-zlafl6r","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311110200-zlafl6r","updated":"20240311110200"},"Children":[{"ID":"20240311110200-fgkxh20","Type":"NodeParagraph","Properties":{"id":"20240311110200-fgkxh20","updated":"20240311110200"},"Children":[{"Type":"NodeText","Data":"不会导入默认构造和复制构造"}]}]},{"ID":"20240311110200-zqu218n","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311110200-zqu218n","updated":"20240311110200"},"Children":[{"ID":"20240311110200-l4cvee3","Type":"NodeParagraph","Properties":{"id":"20240311110200-l4cvee3","updated":"20240311110200"},"Children":[{"Type":"NodeText","Data":"不影响自动生成派生类默认构造 -- 即使用了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"using"},{"Type":"NodeText","Data":"​ 但没有其他构造，也会产生默认构造"}]}]},{"ID":"20240311110200-dge1uqr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311110200-dge1uqr","updated":"20240311110200"},"Children":[{"ID":"20240311110200-2eqik1t","Type":"NodeParagraph","Properties":{"id":"20240311110200-2eqik1t","updated":"20240311110200"},"Children":[{"Type":"NodeText","Data":"若派生类中有与基类接受形参相同的构造，不会生成继承构造"}]}]}]},{"ID":"20240311110200-yvi2a2p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311110200-yvi2a2p","updated":"20240311110200"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"class A {\npublic:\n    A(int a) {\n        cout \u003c\u003c \"Constructor from A\" \u003c\u003c endl;\n    }\n  \n    A() = default;\n};\n\nclass B : public A {\npublic:\n    using A::A;\n    B(int b): A() {\n        cout \u003c\u003c \"Constructor from B\" \u003c\u003c endl;\n    }\n};\n\nint main() {\n    // Constructor from B\n    B b {10};\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311110200-apjj9dv","Type":"NodeList","ListData":{},"Properties":{"id":"20240311110200-apjj9dv","updated":"20240311110200"},"Children":[{"ID":"20240311110200-r5crojh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311110200-r5crojh","updated":"20240311110200"},"Children":[{"ID":"20240311110200-vnlbp4e","Type":"NodeParagraph","Properties":{"id":"20240311110200-vnlbp4e","updated":"20240311110200"},"Children":[{"Type":"NodeText","Data":"多继承中，若导入的构造包含相同的形参列表，编译失败"}]}]}]},{"ID":"20240311110200-netjfmo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311110200-netjfmo","updated":"20240311110200"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"class A1 {\npublic:\n    A1(int a) {}\n};\n\nclass A2 {\npublic:\n    A2(int a) {}\n};\n\nclass B : public A1, public A2 {\n    using A1::A1;\n    using A2::A2;\n};\n\nint main() {\n    // error: call of overloaded 'B(\u003cbrace-enclosed initializer list\u003e)' is ambiguous\n    // note: candidate: 'A2::A2(int)'\n    // note: candidate: 'A1::A1(int)'\n    B b = B{10};\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311110200-9stx7ff","Type":"NodeList","ListData":{},"Properties":{"id":"20240311110200-9stx7ff","updated":"20240311110200"},"Children":[{"ID":"20240311110200-29si30c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311110200-29si30c","updated":"20240311110200"},"Children":[{"ID":"20240311110200-wbu2q70","Type":"NodeParagraph","Properties":{"id":"20240311110200-wbu2q70","updated":"20240311110200"},"Children":[{"Type":"NodeText","Data":"基类构造不能为 private"}]}]}]}]}