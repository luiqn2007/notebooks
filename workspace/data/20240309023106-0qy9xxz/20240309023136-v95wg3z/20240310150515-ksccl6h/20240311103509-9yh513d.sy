{"ID":"20240311103509-9yh513d","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f527","id":"20240311103509-9yh513d","tags":"C++20","title":"指定初始化","updated":"20240311103834"},"Children":[{"ID":"20240311103741-w8lvl93","Type":"NodeParagraph","Properties":{"id":"20240311103741-w8lvl93","updated":"20240311103741"},"Children":[{"Type":"NodeText","Data":"C++20 开始，允许指定初始化成员类型以提高可读性"}]},{"ID":"20240311103741-9c6vsga","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311103741-9c6vsga","updated":"20240311103741"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct Point {\n    int x, y;\n};\n\n// 实例化变量 p\nPoint p {\n    .x = 10,\n    .y = 20\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311103741-9yr9bh0","Type":"NodeParagraph","Properties":{"id":"20240311103741-9yr9bh0","updated":"20240311103741"},"Children":[{"Type":"NodeText","Data":"但有以下限制（斜体表示 c++ 不可用但 c 可用）："}]},{"ID":"20240311103741-9a25ula","Type":"NodeList","ListData":{},"Properties":{"id":"20240311103741-9a25ula","updated":"20240311103834"},"Children":[{"ID":"20240311103741-bg6vmdp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311103741-bg6vmdp","updated":"20240311103816"},"Children":[{"ID":"20240311103741-55c486e","Type":"NodeParagraph","Properties":{"id":"20240311103741-55c486e","updated":"20240311103816"},"Children":[{"Type":"NodeText","Data":"类型必须是一个"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240311103402-rz5zivz","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"聚合类"}]}]},{"ID":"20240311103741-z8mudxw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311103741-z8mudxw","updated":"20240311103834"},"Children":[{"ID":"20240311103741-9oo0jl9","Type":"NodeParagraph","Properties":{"id":"20240311103741-9oo0jl9","updated":"20240311103834"},"Children":[{"Type":"NodeText","Data":"不能修改静态成员值"}]}]}]},{"ID":"20240311103741-24jyyok","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311103741-24jyyok","updated":"20240311103741"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct Point {\n    int x, y;\n    static int w;\n};\n\nPoint p {\n    .x = 10,\n    .y = 20,\n    // error: 'Point' has no non-static data member named 'w'\n    .w = 5;\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311103741-50ib5hx","Type":"NodeList","ListData":{},"Properties":{"id":"20240311103741-50ib5hx","updated":"20240311103741"},"Children":[{"ID":"20240311103741-9cd4852","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311103741-9cd4852","updated":"20240311103741"},"Children":[{"ID":"20240311103741-tqvtebz","Type":"NodeParagraph","Properties":{"id":"20240311103741-tqvtebz","updated":"20240311103741"},"Children":[{"Type":"NodeText","Data":"每个成员只能初始化一次"}]}]}]},{"ID":"20240311103741-x3oshfv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311103741-x3oshfv","updated":"20240311103741"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"Point p {\n    .x = 10,\n    // error: '.x' designator used multiple times in the same initializer list\n    .x = 20\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311103741-07i9b9j","Type":"NodeList","ListData":{},"Properties":{"id":"20240311103741-07i9b9j","updated":"20240311103741"},"Children":[{"ID":"20240311103741-5pjex9x","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311103741-5pjex9x","updated":"20240311103741"},"Children":[{"ID":"20240311103741-2lus7bt","Type":"NodeParagraph","Properties":{"id":"20240311103741-2lus7bt","updated":"20240311103741"},"Children":[{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":"必须按声明顺序设置（比如例子中不能先初始化 y 后初始化 x）"}]}]}]},{"ID":"20240311103741-4b3vbgl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311103741-4b3vbgl","updated":"20240311103741"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"Point p {\n    .y = 10,\n    // error: designator order for field 'Point::x' does not match declaration order in 'Point'\n    .x = 20\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311103741-syoma59","Type":"NodeList","ListData":{},"Properties":{"id":"20240311103741-syoma59","updated":"20240311103741"},"Children":[{"ID":"20240311103741-an2mm9l","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311103741-an2mm9l","updated":"20240311103741"},"Children":[{"ID":"20240311103741-gde1uil","Type":"NodeParagraph","Properties":{"id":"20240311103741-gde1uil","updated":"20240311103741"},"Children":[{"Type":"NodeText","Data":"若类型为一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"union"},{"Type":"NodeText","Data":"​，则只能初始化一个值"}]}]}]},{"ID":"20240311103741-f4j41f7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311103741-f4j41f7","updated":"20240311103741"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"union XY { \n    int x;\n    float y;\n};\n\nXY {\n    .x = 3,\n    // error: too many initializers for 'main()::XY'\n    .y = 1.0f\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311103741-8xau5fw","Type":"NodeList","ListData":{},"Properties":{"id":"20240311103741-8xau5fw","updated":"20240311103741"},"Children":[{"ID":"20240311103741-s2klheu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311103741-s2klheu","updated":"20240311103741"},"Children":[{"ID":"20240311103741-ytqzkco","Type":"NodeParagraph","Properties":{"id":"20240311103741-ytqzkco","updated":"20240311103741"},"Children":[{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":"不能使用"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"em code","TextMarkTextContent":"."},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":"嵌套初始化，但可以使用"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"em code","TextMarkTextContent":"{}"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240311103741-c77ioav","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311103741-c77ioav","updated":"20240311103741"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct Point {\n    int x, y;\n};\n\nstruct Rect {\n    Point p0, p1;\n};\n\nRect {\n    // error: expected primary-expression before '{' token\n    .p0.x = 1,\n    .p0.y = 10,\n    .p1.x = 10,\n    .p1.y = 20\n};\n\n// 正确\nRect{\n    .p0 {.x = 1, .y = 10},\n    .p1 {.x = 10, .y = 20}\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311103741-5q7idat","Type":"NodeList","ListData":{},"Properties":{"id":"20240311103741-5q7idat","updated":"20240311103741"},"Children":[{"ID":"20240311103741-39dqgyx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311103741-39dqgyx","updated":"20240311103741"},"Children":[{"ID":"20240311103741-853j8ms","Type":"NodeParagraph","Properties":{"id":"20240311103741-853j8ms","updated":"20240311103741"},"Children":[{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":"不能混用指定初始化和其他初始化"}]}]}]},{"ID":"20240311103741-571dpgh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311103741-571dpgh","updated":"20240311103741"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"Point p{\n    .x = 3,\n    // error: either all initializer clauses should be designated or none of them should be\n    5\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}