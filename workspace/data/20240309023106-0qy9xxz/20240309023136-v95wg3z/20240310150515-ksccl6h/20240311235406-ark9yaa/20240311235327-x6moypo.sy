{"ID":"20240311235327-x6moypo","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240311235327-x6moypo","tags":"C++11","title":"friend 声明模板形参","updated":"20240311235523"},"Children":[{"ID":"20240311235451-jex1qhu","Type":"NodeParagraph","Properties":{"id":"20240311235451-jex1qhu","updated":"20240311235456"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240311235406-ark9yaa","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"友元"},{"Type":"NodeText","Data":"类可以忽略 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"class"},{"Type":"NodeText","Data":"​（C++11 之前可能允许，看编译器）"}]},{"ID":"20240311235451-fr0tnlm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311235451-fr0tnlm","updated":"20240311235451"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"class C;\nclass X {\n    friend C;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311235451-9fj0mma","Type":"NodeParagraph","Properties":{"id":"20240311235451-9fj0mma","updated":"20240311235451"},"Children":[{"Type":"NodeText","Data":"此时，类型 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"C"},{"Type":"NodeText","Data":"​ 可以是一个普遍意义上的类型，而不一定是一个类甚至不一定是一个具体类 -- 可以是基本类型，可以是类型模板参数，可以是类型别名等"}]},{"ID":"20240311235451-4rbsfrn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311235451-4rbsfrn","updated":"20240311235451"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"class C;\ntypedef C Ct;\n\ntemplate\u003cclass T\u003e\nclass X {\n    friend void;\n    friend int;\n    friend C;\n    friend Ct;\n    friend T;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311235451-nbyg316","Type":"NodeParagraph","Properties":{"id":"20240311235451-nbyg316","updated":"20240311235518"},"Children":[{"Type":"NodeText","Data":"于是，我们可以通过"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310160951-q73e9sq","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"模板"},{"Type":"NodeText","Data":"声明友元类了。一个使用场景如下："}]},{"ID":"20240311235451-u3h5fwt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311235451-u3h5fwt","updated":"20240311235451"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"class InnerVisitor { /* do something */ };\n\ntemplate\u003cclass T\u003e\nclass SomeDatabase {\n    friend T;\n    // do something\n}\n\n// 内部诊断使用，允许使用 InnerVisitor 操作和查看数据库类私有成员\ntypedef SomeDatabase\u003cInnerVisitor\u003e DiagDatabase;\n// 外部使用，没有友元类\ntypedef SomeDatabase\u003cvoid\u003e         SimpleDatabase;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311235523-ckhvtjd","Type":"NodeParagraph","Properties":{"id":"20240311235523-ckhvtjd"}}]}