{"ID":"20240311024103-3vaitk8","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240311024103-3vaitk8","tags":"C++11","title":"复制构造优化","updated":"20240311024302"},"Children":[{"ID":"20240311024117-q9cv7py","Type":"NodeParagraph","Properties":{"id":"20240311024117-q9cv7py","updated":"20240311024302"},"Children":[{"Type":"NodeText","Data":"新版本 c++ 会将一些曾经使用"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310161959-qu755f6","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"复制构造"},{"Type":"NodeText","Data":"的地方使用"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310162017-6jmflci","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"移动构造"},{"Type":"NodeText","Data":"以提高效率。"}]},{"ID":"20240311024117-xrr7afr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311024117-xrr7afr","updated":"20240311024117"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct X;\n\nX f(X x) {\n    return x;\n}\n\nint main() {\n    X r = f(X{});\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311024117-dvznrc4","Type":"NodeParagraph","Properties":{"id":"20240311024117-dvznrc4","updated":"20240311024145"},"Children":[{"Type":"NodeText","Data":"老版本 c++ 中，将  "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"f()"},{"Type":"NodeText","Data":"​ 的结果赋值给 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"r"},{"Type":"NodeText","Data":"​ 的过程调用的是复制构造。"},{"Type":"NodeTextMark","TextMarkType":"tag","TextMarkTextContent":"C++11"},{"Type":"NodeText","Data":"​ 会将其优化为使用移动构造。"}]},{"ID":"20240311024117-0j7bi0e","Type":"NodeParagraph","Properties":{"id":"20240311024117-0j7bi0e","updated":"20240311024244"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"tag","TextMarkTextContent":"C++20"},{"Type":"NodeText","Data":"​ 对右值引用和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"throw"},{"Type":"NodeText","Data":"​ 进行扩展。该标准规定以下情况可以采用移动代替复制："}]},{"ID":"20240311024117-4vn25ld","Type":"NodeList","ListData":{},"Properties":{"id":"20240311024117-4vn25ld","updated":"20240311024117"},"Children":[{"ID":"20240311024117-a3z0h8a","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311024117-a3z0h8a","updated":"20240311024117"},"Children":[{"ID":"20240311024117-fei3hin","Type":"NodeParagraph","Properties":{"id":"20240311024117-fei3hin","updated":"20240311024117"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"return"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"co_return"},{"Type":"NodeText","Data":"​ 返回的对象是函数或 lambda 表达式中的对象或形参"}]}]},{"ID":"20240311024117-g6vybwj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311024117-g6vybwj","updated":"20240311024117"},"Children":[{"ID":"20240311024117-vfmvv5r","Type":"NodeParagraph","Properties":{"id":"20240311024117-vfmvv5r","updated":"20240311024117"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"throw"},{"Type":"NodeText","Data":"​ 抛出的对象是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"try"},{"Type":"NodeText","Data":"​ 块中的对象"}]}]}]},{"ID":"20240311024245-sfx119l","Type":"NodeParagraph","Properties":{"id":"20240311024245-sfx119l"}}]}