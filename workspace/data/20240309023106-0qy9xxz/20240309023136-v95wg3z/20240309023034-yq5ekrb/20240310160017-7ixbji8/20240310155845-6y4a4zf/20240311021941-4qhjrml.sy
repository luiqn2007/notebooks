{"ID":"20240311021941-4qhjrml","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240311021941-4qhjrml","title":"推导规则","updated":"20240311022345"},"Children":[{"ID":"20240311021954-er2gxto","Type":"NodeList","ListData":{},"Properties":{"id":"20240311021954-er2gxto","updated":"20240311021954"},"Children":[{"ID":"20240311021954-lz4a6ft","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311021954-lz4a6ft","updated":"20240311021954"},"Children":[{"ID":"20240311021954-k9r5ahk","Type":"NodeParagraph","Properties":{"id":"20240311021954-k9r5ahk","updated":"20240311021954"},"Children":[{"Type":"NodeText","Data":"若被推导表达式是一个未加括号的表达式或类成员 e，推断结果为 e 的类型 T；若 e 为一组重载函数，则无法推断"}]}]}]},{"ID":"20240311022108-7t5e00i","Type":"NodeSuperBlock","Properties":{"id":"20240311022108-7t5e00i","updated":"20240311022108"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240311021954-kxd3hlc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311021954-kxd3hlc","updated":"20240311022108"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"int i = 10;\n// decltype(i) 推断为 int\ndecltype(i) i_ret;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311022033-e0wufel","Type":"NodeParagraph","Properties":{"id":"20240311022033-e0wufel","updated":"20240311022108"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20240108092223"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20240108092223-20240311022033-10ropik.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240311022141-a5n3w7f","Type":"NodeSuperBlock","Properties":{"id":"20240311022141-a5n3w7f","updated":"20240311022142"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240311021954-5gchwro","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311021954-5gchwro","updated":"20240311022142"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct STRUCT {\n    int x;\n    double y;\n} *j;\n// decltype(j) 推导为 STRUCT*\ndecltype(j) j_ret;\n// decltype(*j) 推导为 STRUCT\u0026\ndecltype(*j) j__ret;\n// decltype(j-\u003ey) 推导为 double\ndecltype(j-\u003ey) jx_ret;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311022136-x52q7to","Type":"NodeParagraph","Properties":{"id":"20240311022136-x52q7to","updated":"20240311022142"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20240108092232"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20240108092232-20240311022136-9axup03.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240311021954-2frr6ju","Type":"NodeList","ListData":{},"Properties":{"id":"20240311021954-2frr6ju","updated":"20240311021954"},"Children":[{"ID":"20240311021954-l2jbgc4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311021954-l2jbgc4","updated":"20240311021954"},"Children":[{"ID":"20240311021954-lsjl20i","Type":"NodeParagraph","Properties":{"id":"20240311021954-lsjl20i","updated":"20240311021954"},"Children":[{"Type":"NodeText","Data":"若推导表达式为一个函数或仿函数调用，推断类型为函数返回值。注意此时函数并不会被调用"}]}]}]},{"ID":"20240311022209-3rvin1a","Type":"NodeSuperBlock","Properties":{"id":"20240311022209-3rvin1a","updated":"20240311022210"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240311021954-t0rbgsq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311021954-t0rbgsq","updated":"20240311022210"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"const int\u0026\u0026 foo();\n// decltype(foo()) 推断为 int\u0026\u0026\ndecltype(foo()) foo_result;\n\nint fun(char);\ndouble fun(int);\nchar fun(double);\n// decltype(fun(3.0)) 推断为 char\ndecltype(fun(3.0)) fun_d_result;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311021954-soz4szw","Type":"NodeParagraph","Properties":{"id":"20240311021954-soz4szw","updated":"20240311022210"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20240108093953"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20240108093953-20240311022200-yqlc6nx.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240311021954-rxsqrc8","Type":"NodeList","ListData":{},"Properties":{"id":"20240311021954-rxsqrc8","updated":"20240311021954"},"Children":[{"ID":"20240311021954-mfsgkjv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311021954-mfsgkjv","updated":"20240311021954"},"Children":[{"ID":"20240311021954-ci4amnm","Type":"NodeParagraph","Properties":{"id":"20240311021954-ci4amnm","updated":"20240311021954"},"Children":[{"Type":"NodeText","Data":"若被推导值为类型为 T 的左值，则结果为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"T\u0026amp;"},{"Type":"NodeText","Data":"​；若被推导值为将亡值，则结果为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"T\u0026amp;\u0026amp;"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240311022329-vhm3fhq","Type":"NodeSuperBlock","Properties":{"id":"20240311022329-vhm3fhq","updated":"20240311022324"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240311021954-dog4sy6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311021954-dog4sy6","updated":"20240311022330"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"// i=3 结果左值，decltype(i=3) 推断结果为 int\u0026\ndecltype(i=3) lv_result;\n// (int\u0026\u0026)i 结果为右值，decltype((int\u0026\u0026)i) 推断结果为 int\u0026\u0026\ndecltype((int\u0026\u0026)i) rv_result;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311021954-3l9j5hi","Type":"NodeParagraph","Properties":{"id":"20240311021954-3l9j5hi","updated":"20240311022324"},"Children":[{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20240108094440"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20240108094440-20240311022229-3ce9jrm.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240311022341-gs0qwzq","Type":"NodeList","ListData":{},"Properties":{"id":"20240311022341-gs0qwzq","updated":"20240311022345"},"Children":[{"ID":"20240311022345-t9686xj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311022345-t9686xj","updated":"20240311022345"},"Children":[{"ID":"20240311022345-f020894","Type":"NodeParagraph","Properties":{"id":"20240311022345-f020894","updated":"20240311022345"},"Children":[{"Type":"NodeText","Data":"其他类型直接返回被推导值的类型（比较奇怪的是函数）"}]}]}]},{"ID":"20240311021954-cmxyers","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311021954-cmxyers","updated":"20240311021954"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"void foo();\n// foo_type 类型为 void(void)\n// typeid(foo_type).name() 为 FvvE\n// 这个不知道有什么用\ndecltype(foo) foo_type;\n// p_foo_type 类型为 void(*)(void)\n// typeid(p_foo_type).name() 为 PFvvE\n// 这个是函数指针\ndecltype(foo) *p_foo_type;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311021954-hh726dg","Type":"NodeList","ListData":{},"Properties":{"id":"20240311021954-hh726dg","updated":"20240311021954"},"Children":[{"ID":"20240311021954-3jqm2tv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311021954-3jqm2tv","updated":"20240311021954"},"Children":[{"ID":"20240311021954-vygkpln","Type":"NodeParagraph","Properties":{"id":"20240311021954-vygkpln","updated":"20240311021954"},"Children":[{"Type":"NodeText","Data":"推断保留 const，volatile 修饰符"}]}]}]}]}