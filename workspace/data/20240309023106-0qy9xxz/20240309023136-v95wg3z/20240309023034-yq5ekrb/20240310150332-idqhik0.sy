{"ID":"20240310150332-idqhik0","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240310150332-idqhik0","title":"结构体","updated":"20240311100517"},"Children":[{"ID":"20240310150345-gxuhf15","Type":"NodeParagraph","Properties":{"id":"20240310150345-gxuhf15","updated":"20240310150646"},"Children":[{"Type":"NodeText","Data":"结构体一种自定义的数据结构，继承自 C 并对其进行了一些扩充，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"struct"},{"Type":"NodeText","Data":"​ 声明，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"{}"},{"Type":"NodeText","Data":"​ 初始化，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"."},{"Type":"NodeText","Data":"​ 访问和修改元素，结构体指针使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-\u0026gt;"},{"Type":"NodeText","Data":"​ 访问和修改元素。"}]},{"ID":"20240310150646-crxfgj8","Type":"NodeParagraph","Properties":{"id":"20240310150646-crxfgj8","updated":"20240310150740"},"Children":[{"Type":"NodeText","Data":"在形式上 C++ 与 C 有所不同的一点是，C++ 的结构体在使用时不再需要带有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"struct"},{"Type":"NodeText","Data":"​ 前缀，因此也不需要使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"typedef"},{"Type":"NodeText","Data":"​ 重定义。"}]},{"ID":"20240310150345-mi8s5zb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310150345-mi8s5zb","updated":"20240310150802"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct Rectange {\n    int left;\n    int top;\n    int width;\n    int height;\n};\n\n// 不需要是 struct Rectange\nRectange r { 5, 7, 20, 40 };\nr.left = 10;\n(\u0026r) -\u003e top = 15;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310150345-bsir9p2","Type":"NodeParagraph","Properties":{"id":"20240310150345-bsir9p2","updated":"20240310150444"},"Children":[{"Type":"NodeText","Data":"由于结构体内数据有固定且只与类型和顺序相关的内存分布，且与 C 排布方式相同，可直接强制转换相同元素、不同类型的结构体指针，也可以使用结构体兼容调用 C 库，且只要内存排布相同，结构体之间就能安全强转。"}]},{"ID":"20240310150345-w2mrvvj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310150345-w2mrvvj","updated":"20240310150345"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct RECT {\n    int left_value;\n    int top_value;\n    int width_size;\n    int height_size;\n};\n\nint main() {\n    Rectange r { 10, 20, 30, 40 };\n    Rectange *pr { \u0026r };\n    RECT *prect { (RECT*) (void*) pr };\n    // left=10\n    cout \u003c\u003c \"left=\" \u003c\u003c prect-\u003eleft_value;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310150345-g69kkb9","Type":"NodeParagraph","Properties":{"id":"20240310150345-g69kkb9","updated":"20240311100517"},"Children":[{"Type":"NodeText","Data":"C++ 对结构体的扩展使结构体与"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310150515-ksccl6h","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"类"},{"Type":"NodeText","Data":"几乎相同。结构体内也可以有成员函数，"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310161644-g7cva4b","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"构造函数"},{"Type":"NodeText","Data":"和"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310161939-6od9da1","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"析构函数"},{"Type":"NodeText","Data":"，"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310154847-7kdyjsm","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"私有成员"},{"Type":"NodeText","Data":"，甚至还能有"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310154913-up88hl0","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"继承"},{"Type":"NodeText","Data":"。与类唯一的区别是，默认成员权限是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"public"},{"Type":"NodeText","Data":"​ 的。几乎"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"所有类中的特性结构体都可以使用。"}]},{"ID":"20240310150513-7hxar75","Type":"NodeParagraph","Properties":{"id":"20240310150513-7hxar75"}}]}