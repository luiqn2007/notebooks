{"ID":"20240310145955-6yyutur","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240310145955-6yyutur","tags":"C++11","title":"有作用域枚举","updated":"20240311111133"},"Children":[{"ID":"20240310150158-zimwgto","Type":"NodeParagraph","Properties":{"id":"20240310150158-zimwgto","updated":"20240311111133"},"Children":[{"Type":"NodeText","Data":"C 风格枚举使用中存在很多问题"}]},{"ID":"20240310150158-hkk564d","Type":"NodeList","ListData":{},"Properties":{"id":"20240310150158-hkk564d","updated":"20240311111120"},"Children":[{"ID":"20240310150158-vbrfuqi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240310150158-vbrfuqi","updated":"20240310150158"},"Children":[{"ID":"20240310150158-8ucvrmi","Type":"NodeParagraph","Properties":{"id":"20240310150158-8ucvrmi","updated":"20240311110717"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"=="},{"Type":"NodeText","Data":"​ 运算符判断的是内部存储的实际的值，不包含枚举本身的类型"}]}]},{"ID":"20240310150158-igpc2s8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240310150158-igpc2s8","updated":"20240310150158"},"Children":[{"ID":"20240310150158-iqudtls","Type":"NodeParagraph","Properties":{"id":"20240310150158-iqudtls","updated":"20240310150158"},"Children":[{"Type":"NodeText","Data":"所有值是直接暴露在命名空间中，同一个命名空间内不同枚举不能有相同的值"}]}]}]},{"ID":"20240310150158-aa2nedg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310150158-aa2nedg","updated":"20240311111120"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"enum Weekday {\n    Mon, Tues = 3, Wed, Thurs = 2, Fri, Set, Sun = 7\n};\n\nenum Weekend {\n    Set, Sun\n};\n\n// 编译错误\n// 'Set' conflicts with a previous declaration\n\nint main() {\n    cout \u003c\u003c Set \u003c\u003c endl;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310150158-19f36h2","Type":"NodeParagraph","Properties":{"id":"20240310150158-19f36h2","updated":"20240311104729"},"Children":[{"Type":"NodeText","Data":"C++ 引入了枚举作用域，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"enum class"},{"Type":"NodeText","Data":"​​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"enum struct"},{"Type":"NodeText","Data":"​​ 声明，使得允许在相同"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310115655-67bgyss","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"命名空间"},{"Type":"NodeText","Data":"中，不同枚举有相同名的值。"}]},{"ID":"20240310150158-a6bdw4z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310150158-a6bdw4z","updated":"20240310150158"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"enum class Weekday {\n    Mon, Tues = 3, Wed, Thurs = 2, Fri, Set, Sun = 7\n};\n\nenum class Weekend {\n    Set, Sun\n};\n\nint main() {\n    cout \u003c\u003c typeid(Weekday::Set).name() \u003c\u003c endl; // 7Weekday\n    cout \u003c\u003c typeid(Weekend::Set).name() \u003c\u003c endl; // 2Weekend\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311110809-gm6n83u","Type":"NodeParagraph","Properties":{"id":"20240311110809-gm6n83u","updated":"20240311110930"},"Children":[{"Type":"NodeText","Data":"新枚举类型属于"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240311103606-4ullr4e","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"POD 类型"},{"Type":"NodeText","Data":"，且具备以下特点："}]},{"ID":"20240311110922-230m2ad","Type":"NodeList","ListData":{},"Properties":{"id":"20240311110922-230m2ad","updated":"20240311110922"},"Children":[{"ID":"20240311110922-snr9vub","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311110922-snr9vub","updated":"20240311110922"},"Children":[{"ID":"20240311110922-qyswa19","Type":"NodeParagraph","Properties":{"id":"20240311110922-qyswa19","updated":"20240311110922"},"Children":[{"Type":"NodeText","Data":"枚举标识符属于枚举类型的作用域"}]}]}]},{"ID":"20240311110922-wyk5rs5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311110922-wyk5rs5","updated":"20240311110922"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"enum class E {\n    e1, e2, e3\n};\n\nint main() {\n    // error: 'e1' was not declared in this scope; did you mean 'E::e1'?\n    E e = e1;\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311110922-d6llatt","Type":"NodeList","ListData":{},"Properties":{"id":"20240311110922-d6llatt","updated":"20240311110922"},"Children":[{"ID":"20240311110922-7l4a51o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311110922-7l4a51o","updated":"20240311110922"},"Children":[{"ID":"20240311110922-3ao8gei","Type":"NodeParagraph","Properties":{"id":"20240311110922-3ao8gei","updated":"20240311110922"},"Children":[{"Type":"NodeText","Data":"枚举值不会隐式转换为整形；可以进行强制类型转换（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"static_cast"},{"Type":"NodeText","Data":"​）"}]}]}]},{"ID":"20240311110922-mmet4ec","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311110922-mmet4ec","updated":"20240311110922"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"enum class E {\n    e1, e2, e3\n};\n\nint main() {\n    // error: cannot convert 'E' to 'int' in initialization\n    int ve = E::e1;\n    // 应该这么用\n    int v =  static_cast\u003cint\u003e(E::e1);\n    E e = static_cast\u003cE\u003e(0);\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311110922-mlstg59","Type":"NodeList","ListData":{},"Properties":{"id":"20240311110922-mlstg59","updated":"20240311110922"},"Children":[{"ID":"20240311110922-zve80d8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311110922-zve80d8","updated":"20240311110922"},"Children":[{"ID":"20240311110922-9ldr022","Type":"NodeParagraph","Properties":{"id":"20240311110922-9ldr022","updated":"20240311110922"},"Children":[{"Type":"NodeText","Data":"允许指定底层类型，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":":"},{"Type":"NodeText","Data":"​ 指定，默认为 int"}]}]}]},{"ID":"20240311110922-iwnu2si","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311110922-iwnu2si","updated":"20240311110922"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"enum class E: unsigned int {\n    e1 = 0,\n    e2 = 1,\n    // error: enumerator value '-1' is outside the range of underlying type 'unsigned int'\n    e3 = -1\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}