{"ID":"20240311023120-2yr5e7r","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240311023120-2yr5e7r","tags":"C++11","title":"值类别","updated":"20240311023650"},"Children":[{"ID":"20240311023120-hma6ffl","Type":"NodeParagraph","Properties":{"id":"20240311023120-hma6ffl","updated":"20240311023137"},"Children":[{"Type":"NodeText","Data":"C++ 中左值与右值的概念在 c++98 时期就出现了。左值一般是指一个指向特定内存的具有名称的值，具有一个稳定的内存地址。右值指向不稳定内存地址的匿名值，通常是暂时的，生命周期很短。"}]},{"ID":"20240311023146-dinopay","Type":"NodeParagraph","Properties":{"id":"20240311023146-dinopay","updated":"20240311023146"},"Children":[{"Type":"NodeText","Data":"有一个很简单的判断方法，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;"},{"Type":"NodeText","Data":"​ 取值后，可以正常编译取到地址的就是左值。一般左值与右值还是很好分辨的，但也有一些特例"}]},{"ID":"20240311023146-ujasvar","Type":"NodeList","ListData":{},"Properties":{"id":"20240311023146-ujasvar","updated":"20240311023146"},"Children":[{"ID":"20240311023146-azr4bq7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023146-azr4bq7","updated":"20240311023146"},"Children":[{"ID":"20240311023146-8xzbug5","Type":"NodeParagraph","Properties":{"id":"20240311023146-8xzbug5","updated":"20240311023146"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"++i"},{"Type":"NodeText","Data":"​ 与 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"i++"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"++i"},{"Type":"NodeText","Data":"​ 是左值，返回的变量是 i，具有稳定的内存地址；"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"i++"},{"Type":"NodeText","Data":"​ 是右值，返回的是对原来 i 的一个副本"}]}]},{"ID":"20240311023146-sk67zoy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023146-sk67zoy","updated":"20240311023146"},"Children":[{"ID":"20240311023146-j2y60gj","Type":"NodeParagraph","Properties":{"id":"20240311023146-j2y60gj","updated":"20240311023146"},"Children":[{"Type":"NodeText","Data":"函数：函数形参是左值，但返回值是右值"}]}]},{"ID":"20240311023146-jq6ryid","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023146-jq6ryid","updated":"20240311023146"},"Children":[{"ID":"20240311023146-gp4ejbd","Type":"NodeParagraph","Properties":{"id":"20240311023146-gp4ejbd","updated":"20240311023146"},"Children":[{"Type":"NodeText","Data":"字面量：一般数值的字面量都是右值，但字符串字面量是左值 - 字符串有一个连续的字符数组存储，具有稳定的内存地址"}]}]}]},{"ID":"20240311023146-lqao9o3","Type":"NodeParagraph","Properties":{"id":"20240311023146-lqao9o3","updated":"20240311023146"},"Children":[{"Type":"NodeText","Data":"值类别是 C++11 引入的新概念，用于描述表达式的属性，并于 C++17 进行了清晰的区分："}]},{"ID":"20240311023230-hjmldoh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311023230-hjmldoh","updated":"20240311023558"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bWVybWFpZA=="},{"Type":"NodeCodeBlockCode","Data":"flowchart \nexpression[表达式（expression）] --\u0026gt; glvalue[泛左值（glvalue）]\nexpression[表达式（expression）] --\u0026gt; rvalue[右值（rvalue）]\nglvalue --\u0026gt; lvalue[左值（lvalue）]\nglvalue --\u0026gt; xvalue[将亡值（xvalue）]\nrvalue --\u0026gt; xvalue\nrvalue --\u0026gt; prvalue[纯右值（prvalue）]"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311023604-s9eue01","Type":"NodeList","ListData":{},"Properties":{"id":"20240311023604-s9eue01","updated":"20240311023622"},"Children":[{"ID":"20240311023604-cndbamd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023604-cndbamd","updated":"20240311023604"},"Children":[{"ID":"20240311023604-kwxw55f","Type":"NodeParagraph","Properties":{"id":"20240311023604-kwxw55f","updated":"20240311023604"},"Children":[{"Type":"NodeText","Data":"泛左值：通过评估能确定对象、位域或函数的标志的表达式，即具名对象，C++98的左值"}]}]},{"ID":"20240311023604-1pz1qhj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023604-1pz1qhj","updated":"20240311023604"},"Children":[{"ID":"20240311023604-28yp7wy","Type":"NodeParagraph","Properties":{"id":"20240311023604-28yp7wy","updated":"20240311023604"},"Children":[{"Type":"NodeText","Data":"右值：即 C++98的右值"}]}]},{"ID":"20240311023604-wmkddch","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023604-wmkddch","updated":"20240311023622"},"Children":[{"ID":"20240311023604-vott0x9","Type":"NodeParagraph","Properties":{"id":"20240311023604-vott0x9","updated":"20240311023604"},"Children":[{"Type":"NodeText","Data":"将亡值：表示资源可被重用的对象和位域，泛左值与右值的交集"}]},{"ID":"20240311023604-z54qdl7","Type":"NodeList","ListData":{},"Properties":{"id":"20240311023604-z54qdl7","updated":"20240311023622"},"Children":[{"ID":"20240311023604-23xkvpi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023604-23xkvpi","updated":"20240311023622"},"Children":[{"ID":"20240311023604-50dfm63","Type":"NodeParagraph","Properties":{"id":"20240311023604-50dfm63","updated":"20240311023622"},"Children":[{"Type":"NodeText","Data":"使用"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310151025-ekhxm7p","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"移动语义"},{"Type":"NodeText","Data":"将泛左值转换为右值引用"}]}]},{"ID":"20240311023604-y993fz6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023604-y993fz6","updated":"20240311023604"},"Children":[{"ID":"20240311023604-ody699b","Type":"NodeParagraph","Properties":{"id":"20240311023604-ody699b","updated":"20240311023604"},"Children":[{"Type":"NodeText","Data":"临时量实质化：纯右值转换为临时对象（c++17）"}]}]}]}]}]},{"ID":"20240311023645-de3zveu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311023645-de3zveu","updated":"20240311023645"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct S {\n    int a;\n};\n\nint main() {\n    // S() 产生一个右值（纯右值）\n    // 访问成员四 a 需要一个左值\n    // 此时将创建 S() 临时变量，该量为将亡值\n    int b = S().a;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311023650-mo79lne","Type":"NodeList","ListData":{},"Properties":{"id":"20240311023650-mo79lne","updated":"20240311023650"},"Children":[{"ID":"20240311023650-9pmm79u","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023650-9pmm79u","updated":"20240311023650"},"Children":[{"ID":"20240311023650-lvojudh","Type":"NodeParagraph","Properties":{"id":"20240311023650-lvojudh","updated":"20240311023650"},"Children":[{"Type":"NodeText","Data":"纯右值：通过评估能用于初始化对象和位域，或能计算运算符操作数的值的表达式"}]}]},{"ID":"20240311023650-eec1wld","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311023650-eec1wld","updated":"20240311023650"},"Children":[{"ID":"20240311023650-tmfx7io","Type":"NodeParagraph","Properties":{"id":"20240311023650-tmfx7io","updated":"20240311023650"},"Children":[{"Type":"NodeText","Data":"左值：非将亡值的泛左值"}]}]}]}]}