{"ID":"20240310152956-qqx8lne","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240310152956-qqx8lne","tags":"C++11","title":"万能引用","updated":"20240311024356"},"Children":[{"ID":"20240311024356-g33xk09","Type":"NodeParagraph","Properties":{"id":"20240311024356-g33xk09","updated":"20240311024356"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"const T\u0026amp;"},{"Type":"NodeText","Data":"​ 可以同时匹配左值和右值引用。但由于其 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"const"},{"Type":"NodeText","Data":"​ 限制，使用场景有一定的限制。C++11 允许使用模板+ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"T\u0026amp;\u0026amp;"},{"Type":"NodeText","Data":"​ 匹配所有类型引用，称为万能引用："}]},{"ID":"20240311024356-j40o201","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311024356-j40o201","updated":"20240311024356"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"//  万能引用\ntemplate\u003ctypename T\u003e\nvoid foo(T\u0026\u0026 v) {\n    // do something\n}\n\nint main() {\n    int i = 5;\n    // 匹配左值引用\n    foo(static_cast\u003cint\u0026\u003e(i));\n    // 匹配右值引用\n    foo(static_cast\u003cint\u0026\u0026\u003e(i));\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311024356-wlidwey","Type":"NodeParagraph","Properties":{"id":"20240311024356-wlidwey","updated":"20240311024356"},"Children":[{"Type":"NodeText","Data":"万能引用主要是通过引用折叠实现："}]},{"ID":"20240311024356-gq3v6ni","Type":"NodeList","ListData":{},"Properties":{"id":"20240311024356-gq3v6ni","updated":"20240311024356"},"Children":[{"ID":"20240311024356-3zb3aan","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311024356-3zb3aan","updated":"20240311024356"},"Children":[{"ID":"20240311024356-xryz6c2","Type":"NodeParagraph","Properties":{"id":"20240311024356-xryz6c2","updated":"20240311024356"},"Children":[{"Type":"NodeText","Data":"只要有一个左值引用，结果就是左值引用"}]}]},{"ID":"20240311024356-l0pg12g","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240311024356-l0pg12g","updated":"20240311024356"},"Children":[{"ID":"20240311024356-efgasaj","Type":"NodeParagraph","Properties":{"id":"20240311024356-efgasaj","updated":"20240311024356"},"Children":[{"Type":"NodeText","Data":"当一个是右值引用，另一个是非引用或右值引用，结果是右值引用"}]}]}]},{"ID":"20240311024356-d67a08g","Type":"NodeTable","TableAligns":[0,1,1],"Properties":{"colgroup":"||","id":"20240311024356-d67a08g","updated":"20240311024356"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"T"}]},{"Type":"NodeTableCell","Data":"th","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"T\u0026"}]},{"Type":"NodeTableCell","Data":"th","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"T\u0026\u0026"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"R"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"R\u0026"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"R\u0026\u0026"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"R\u0026"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"R\u0026"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"R\u0026"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"R\u0026\u0026"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"R\u0026"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"R\u0026\u0026"}]}]}]}]}