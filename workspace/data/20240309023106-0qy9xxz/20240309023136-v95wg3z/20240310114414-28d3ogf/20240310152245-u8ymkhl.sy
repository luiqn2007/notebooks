{"ID":"20240310152245-u8ymkhl","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240310152245-u8ymkhl","title":"函数指针","updated":"20240310221105"},"Children":[{"ID":"20240310152254-3unvcky","Type":"NodeParagraph","Properties":{"id":"20240310152254-3unvcky","updated":"20240310221105"},"Children":[{"Type":"NodeText","Data":"一个"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310114414-28d3ogf","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"函数"},{"Type":"NodeText","Data":"可以赋值给一个变量，以便作为参数传递给其它函数，或作为函数的别名。该变量的类型就是一个函数指针。"}]},{"ID":"20240310152254-f3vfh2r","Type":"NodeParagraph","Properties":{"id":"20240310152254-f3vfh2r","updated":"20240310152411"},"Children":[{"Type":"NodeText","Data":"即，函数指针是一种特殊的"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310011458-lcoh739","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"指针"},{"Type":"NodeText","Data":"，它指向一个函数，可以将函数视作一个变量存储和传递。"}]},{"ID":"20240310152254-8er4xzr","Type":"NodeParagraph","Properties":{"id":"20240310152254-8er4xzr","updated":"20240310152254"},"Children":[{"Type":"NodeText","Data":"函数指针类型只包含函数的返回类型和形参列表的形参类型，只要返回类型和形参类型相同的函数都能为其赋值。其格式表示为："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"返回类型 (*变量名) (形参类型列表)"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240310152254-nk3xhi1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310152254-nk3xhi1","updated":"20240310152254"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"int add(int a, int b) {\n    return a + b;\n}\n\nint main() {\n    int (*op) (int, int) = add;\n    int value = op(3, 5); // 8\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310152254-x3o0svh","Type":"NodeParagraph","Properties":{"id":"20240310152254-x3o0svh","updated":"20240310152349"},"Children":[{"Type":"NodeText","Data":"函数指针类型比较复杂，可使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"auto"},{"Type":"NodeText","Data":"​ 代替"}]},{"ID":"20240310152254-ec014hn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310152254-ec014hn","updated":"20240310152254"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"int main() {\n    auto operation = add;\n    // 3 + 5 = 8\n    cout \u003c\u003c \"3 + 5 = \" \u003c\u003c operation(3, 5) \u003c\u003c endl;\n    operation = mul;\n    // 3 * 5 = 15\n    cout \u003c\u003c \"3 * 5 = \" \u003c\u003c operation(3, 5) \u003c\u003c endl;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310152254-cc0veo9","Type":"NodeParagraph","Properties":{"id":"20240310152254-cc0veo9","updated":"20240310152254"},"Children":[{"Type":"NodeText","Data":"函数指针作为一种指针类型，可以作为参数传递，也可以作为返回值返回"}]},{"ID":"20240310152254-pj05sbf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310152254-pj05sbf","updated":"20240310152254"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"#include\u003ciostream\u003e\n\nusing namespace std;\n\nint add(int a, int b) {\n    return a + b;\n}\n\nint mul(int a, int b) {\n    return a * b;\n}\n\nint calc(int a, int b, int (*operation)(int, int)) {\n    return operation(a, b);\n}\n\nint main() {\n    // 3 + 5 = 8\n    cout \u003c\u003c \"3 + 5 = \" \u003c\u003c calc(3, 5, add) \u003c\u003c endl;\n    // 3 * 5 = 15\n    cout \u003c\u003c \"3 * 5 = \" \u003c\u003c calc(3, 5, mul) \u003c\u003c endl;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}