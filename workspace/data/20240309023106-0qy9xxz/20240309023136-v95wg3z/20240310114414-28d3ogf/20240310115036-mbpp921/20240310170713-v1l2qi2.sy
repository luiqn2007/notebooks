{"ID":"20240310170713-v1l2qi2","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240310170713-v1l2qi2","title":"显式 this 参数","updated":"20240311000726"},"Children":[{"ID":"20240310170721-sxu9hmm","Type":"NodeParagraph","Properties":{"id":"20240310170721-sxu9hmm","updated":"20240310220836"},"Children":[{"Type":"NodeText","Data":"在以前 C++ 标准中，非静态成员"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310114414-28d3ogf","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"函数"},{"Type":"NodeText","Data":"内可访问一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeText","Data":"​​，该指针通常被认为是一个隐式传入的参数 -- 函数后置的修饰符就是该参数的修饰符"}]},{"ID":"20240310170721-f9c6eod","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310170721-f9c6eod","updated":"20240310170721"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct X {\n    // fun1(const X *this)\n    void fun1() const {}\n    // fun2(volatile X\u0026\u0026 *this)\n    void fun2(int i) volatile \u0026\u0026{}\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310170721-dp94tmm","Type":"NodeParagraph","Properties":{"id":"20240310170721-dp94tmm","updated":"20240310220847"},"Children":[{"Type":"NodeText","Data":"C++23 允许函数第一个"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310115036-mbpp921","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"参数"},{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeText","Data":"​​ 修饰，表示该变量即 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeText","Data":"​​ 参数，当然调用时不需要显式传入。类似 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"python"},{"Type":"NodeText","Data":"​​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"self"},{"Type":"NodeText","Data":"​​。"}]},{"ID":"20240310170721-g4y8pqm","Type":"NodeParagraph","Properties":{"id":"20240310170721-g4y8pqm","updated":"20240310170721"},"Children":[{"Type":"NodeText","Data":"但这样的函数便从成员函数变成了静态函数"}]},{"ID":"20240310170721-l0rf0i7","Type":"NodeList","ListData":{},"Properties":{"id":"20240310170721-l0rf0i7","updated":"20240310170721"},"Children":[{"ID":"20240310170721-41kr39s","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240310170721-41kr39s","updated":"20240310170721"},"Children":[{"ID":"20240310170721-27qj6hb","Type":"NodeParagraph","Properties":{"id":"20240310170721-27qj6hb","updated":"20240310170721"},"Children":[{"Type":"NodeText","Data":"函数体内 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeText","Data":"​ 不再可用 - 但有了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeText","Data":"​ 绑定的参数变量代替"}]}]},{"ID":"20240310170721-hlq7rzq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240310170721-hlq7rzq","updated":"20240310170721"},"Children":[{"ID":"20240310170721-kysy9lh","Type":"NodeParagraph","Properties":{"id":"20240310170721-kysy9lh","updated":"20240310170721"},"Children":[{"Type":"NodeText","Data":"不允许 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"static"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"virtual"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cv"},{"Type":"NodeText","Data":"​ 限定符"}]}]}]},{"ID":"20240310170721-48armg9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310170721-48armg9","updated":"20240310170721"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct X {\n    void fun1(this const X \u0026self) {}\n    void fun2(this volatile X \u0026\u0026self, int i) {}\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310170721-erutnvs","Type":"NodeParagraph","Properties":{"id":"20240310170721-erutnvs","updated":"20240310170721"},"Children":[{"Type":"NodeText","Data":"因此，适用于形参的一些技巧便可以直接应用到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeText","Data":"​ 上："}]},{"ID":"20240310170721-c8dnux4","Type":"NodeList","ListData":{},"Properties":{"id":"20240310170721-c8dnux4","updated":"20240311000726"},"Children":[{"ID":"20240310170721-8rpxobn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240310170721-8rpxobn","updated":"20240311000657"},"Children":[{"ID":"20240310170721-yxvvsog","Type":"NodeParagraph","Properties":{"id":"20240310170721-yxvvsog","updated":"20240311000657"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310160514-3ti8z62","TextMarkBlockRefSubtype":"d","TextMarkTextContent":"模板"}]}]},{"ID":"20240310170721-xi6aysx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240310170721-xi6aysx","updated":"20240311000726"},"Children":[{"ID":"20240310170721-rdi1mz6","Type":"NodeParagraph","Properties":{"id":"20240310170721-rdi1mz6","updated":"20240311000726"},"Children":[{"Type":"NodeText","Data":"可以不必要是一个指针或引用，也可以是对象（适用于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"string_view"},{"Type":"NodeText","Data":"​ 等）"}]}]},{"ID":"20240310170721-93jqc43","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240310170721-93jqc43","updated":"20240310220957"},"Children":[{"ID":"20240310170721-5nl0ktm","Type":"NodeParagraph","Properties":{"id":"20240310170721-5nl0ktm","updated":"20240310220957"},"Children":[{"Type":"NodeText","Data":"递归 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240310154429-pfz8p3x","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"lambda"},{"Type":"NodeText","Data":"​​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"lambda"},{"Type":"NodeText","Data":"​​ 是带 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"operator()"},{"Type":"NodeText","Data":"​​ 的匿名类，可以让第一个参数为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this auto self"},{"Type":"NodeText","Data":"​​"}]}]}]},{"ID":"20240310170721-6j4t18k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310170721-6j4t18k","updated":"20240310170721"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"auto fact = [](this auto self, int n) -\u003e int {\n    return n ? n * self(n - 1) : 1; \n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}