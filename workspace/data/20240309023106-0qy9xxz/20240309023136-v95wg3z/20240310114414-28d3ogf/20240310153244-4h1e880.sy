{"ID":"20240310153244-4h1e880","Spec":"1","Type":"NodeDocument","Properties":{"icon":"2620-fe0f","id":"20240310153244-4h1e880","title":"返回值","updated":"20240311000944"},"Children":[{"ID":"20240310153325-m60xdch","Type":"NodeParagraph","Properties":{"id":"20240310153325-m60xdch","updated":"20240310221343"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310114414-28d3ogf","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"函数"},{"Type":"NodeText","Data":"执行完成后，有时要将执行结果传递给调用者，被返回的结果称为函数的返回值。"}]},{"ID":"20240310153323-l5r2g5b","Type":"NodeParagraph","Properties":{"id":"20240310153323-l5r2g5b","updated":"20240310153413"},"Children":[{"Type":"NodeText","Data":"值类型会回传对应值的副本。一般来说编译器会自动使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"move"},{"Type":"NodeText","Data":"​ 优化，实际效率非常高。"}]},{"ID":"20240310153323-clq90af","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310153323-clq90af","updated":"20240310153418"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"int sum(int a, int b) {\n    // 这一句进行的操作：\n    //   创建一个临时变量 t = a + b（可以在内存或寄存器中）\n    //   将 t 的值复制一份，返回给调用位置\n    return a + b;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240310153425-b1r1xds","Type":"NodeParagraph","Properties":{"id":"20240310153425-b1r1xds","updated":"20240311000944"},"Children":[{"Type":"NodeText","Data":"若返回类型是"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240310011502-r5kae4b","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"引用"},{"Type":"NodeText","Data":"，值不会进行复制，否则返回的是数据的副本。一般不会返回一个引用类型，直接返回在一个函数中创建的自动变量的引用是非常危险的"}]},{"ID":"20240310153429-acs7hud","Type":"NodeParagraph","Properties":{"id":"20240310153429-acs7hud","style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);","updated":"20240310153431"},"Children":[{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"strong","TextMarkTextContent":"永远不要"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"返回一个在函数栈中创建的对象的指针或引用，也不要将其以任何方法传递到函数之外"}]},{"ID":"20240310153425-w9k8dbo","Type":"NodeParagraph","Properties":{"id":"20240310153425-w9k8dbo","updated":"20240310153425"},"Children":[{"Type":"NodeText","Data":"主要原因是，函数中的自动变量位于函数自己的栈中，当函数返回时，其栈空间内存会自动释放（根据编译器不同，可能表示为清空或标记为无效）。释放过的内存可以被重新申请，其存储的值是不可预测的。"}]}]}