{"ID":"20240310165042-exqca6z","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240310165042-exqca6z","title":"thread-local","updated":"20240310165049"},"Children":[{"ID":"20240310165049-2lrqftn","Type":"NodeParagraph","Properties":{"id":"20240310165049-2lrqftn","updated":"20240310165049"},"Children":[{"Type":"NodeText","Data":"相当于一个以线程为 key 的表，不同线程获取的值不同，常用于静态或全局成员"}]},{"ID":"20240310165049-onasf45","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240310165049-onasf45","updated":"20240310165049"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"#include \u003ciostream\u003e\n#include \u003cthread\u003e\n\nusing namespace std;\n\nthread_local int value;\n\nint main() {\n    thread ta([](){\n        value = 5;\n        this_thread::sleep_for(chrono::seconds(1));\n        // [a] Value is 5\n        cout \u003c\u003c \"[a] Value is \" \u003c\u003c value \u003c\u003c endl;\n    });\n    thread tb([](){\n        value = 15;\n        this_thread::sleep_for(chrono::seconds(3));\n        // [b] Value is 15\n        cout \u003c\u003c \"[b] Value is \" \u003c\u003c value \u003c\u003c endl;\n    });\n    thread tc([](){\n        value = 55;\n        this_thread::sleep_for(chrono::seconds(5));\n        // [c] Value is 55\n        cout \u003c\u003c \"[c] Value is \" \u003c\u003c value \u003c\u003c endl;\n    });\n\n    ta.join();\n    tb.join();\n    tc.join();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}